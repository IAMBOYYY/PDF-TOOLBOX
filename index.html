<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PDF Toolbox ‚Äì Free Online PDF Tools</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body { font-family: 'Inter', sans-serif; background:#f8fafc; }
.tool-tab{padding:10px 20px;border-radius:999px;background:#e5e7eb;font-weight:700}
.tool-tab.active{background:#2563eb;color:#fff}
.tool-section{display:none}
.tool-section.active{display:block}
.upload-area{border:2px dashed #94a3b8;padding:40px;text-align:center;border-radius:20px;background:#fff;cursor:pointer}
.btn-primary{width:100%;padding:14px;background:#2563eb;color:#fff;border-radius:14px;font-weight:800}
.page-card{border:1px solid #e5e7eb;border-radius:16px;padding:10px;background:white}
canvas{border-radius:10px}
</style>
</head>

<body>

<header class="bg-white border-b sticky top-0 z-50">
<nav class="max-w-6xl mx-auto p-4 flex justify-between">
<div class="font-extrabold text-xl">PDF<span class="text-blue-600">Toolbox</span></div>
</nav>
</header>

<main class="max-w-5xl mx-auto p-4">

<!-- TABS -->
<div class="flex gap-2 overflow-x-auto mb-6">
<button class="tool-tab active" data-tool="merge">Merge</button>
<button class="tool-tab" data-tool="split">Split</button>
<button class="tool-tab" data-tool="compress">Compress</button>
<button class="tool-tab" data-tool="convert">PDF ‚Üí Text</button>
<button class="tool-tab" data-tool="wordcount">Word Count</button>
<button class="tool-tab" data-tool="edit">Edit PDF</button>
</div>

<div class="bg-white p-6 rounded-3xl shadow">

<!-- KEEP YOUR ORIGINAL TOOLS (UNCHANGED) -->
<!-- üî¥ MERGE / SPLIT / COMPRESS / CONVERT / WORDCOUNT -->
<!-- EXACT SAME AS YOUR ORIGINAL CODE ‚Äì NOT TOUCHED -->
<!-- (OMITTED HERE FOR BREATHING SPACE ‚Äì THEY REMAIN SAME) -->

<!-- ================= EDIT PDF TOOL ================= -->
<section id="edit" class="tool-section">
<h2 class="text-2xl font-bold mb-2">Edit & Organize PDF</h2>
<p class="text-gray-500 mb-4">Reorder, delete, rotate pages and add text.</p>

<label class="upload-area mb-4">
<input type="file" id="editIn" accept=".pdf" hidden>
<strong>Select PDF to Edit</strong>
</label>

<div id="pages" class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>

<div class="mt-6">
<input id="textInput" placeholder="Text to add on selected page"
class="w-full border p-3 rounded-xl mb-3">
<button id="applyText" class="btn-primary mb-3">Add Text</button>
<button id="savePdf" class="btn-primary bg-green-600">Download Edited PDF</button>
</div>
</section>

</div>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

<script>
const $ = id => document.getElementById(id);
const pdfjsLib = window['pdfjs-dist/build/pdf'];
pdfjsLib.GlobalWorkerOptions.workerSrc =
'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

document.querySelectorAll(".tool-tab").forEach(tab=>{
tab.onclick=()=>{
document.querySelectorAll(".tool-tab").forEach(t=>t.classList.remove("active"));
document.querySelectorAll(".tool-section").forEach(s=>s.classList.remove("active"));
tab.classList.add("active");
$(tab.dataset.tool).classList.add("active");
};
});

let editPdfDoc, editPages=[], selectedPage=0;

$("editIn").onchange = async e => {
const buf = await e.target.files[0].arrayBuffer();
editPdfDoc = await PDFLib.PDFDocument.load(buf);
renderPages(buf);
};

async function renderPages(buffer){
const pdf = await pdfjsLib.getDocument({data:buffer}).promise;
$("pages").innerHTML="";
for(let i=1;i<=pdf.numPages;i++){
const page = await pdf.getPage(i);
const viewport = page.getViewport({scale:0.4});
const canvas=document.createElement("canvas");
canvas.width=viewport.width;
canvas.height=viewport.height;
await page.render({canvasContext:canvas.getContext("2d"),viewport}).promise;

const card=document.createElement("div");
card.className="page-card";
card.innerHTML=`
<div class="text-xs font-bold mb-1">Page ${i}</div>
<div></div>
<div class="flex gap-1 mt-2">
<button onclick="movePage(${i-1},-1)">‚¨Ü</button>
<button onclick="movePage(${i-1},1)">‚¨á</button>
<button onclick="rotatePage(${i-1})">üîÑ</button>
<button onclick="deletePage(${i-1})">‚ùå</button>
</div>`;
card.children[1].appendChild(canvas);
$("pages").appendChild(card);
}
}

window.movePage = (i,d)=>{
const p = editPdfDoc.getPages();
if(p[i+d]){
const a=p[i],b=p[i+d];
editPdfDoc.removePage(i+d);
editPdfDoc.insertPage(i,b);
}
};

window.rotatePage = i=>{
editPdfDoc.getPages()[i].setRotation(
PDFLib.degrees((editPdfDoc.getPages()[i].getRotation().angle+90)%360)
);
};

window.deletePage = i=>{
editPdfDoc.removePage(i);
};

$("applyText").onclick=()=>{
const page=editPdfDoc.getPages()[0];
page.drawText($("textInput").value,{x:50,y:50,size:16});
};

$("savePdf").onclick=async()=>{
const bytes=await editPdfDoc.save();
const a=document.createElement("a");
a.href=URL.createObjectURL(new Blob([bytes],{type:"application/pdf"}));
a.download="edited.pdf";
a.click();
};
</script>
</body>
</html>
